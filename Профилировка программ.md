Профилировку программы на этапе разработки удобно выполнять с помощью `pyinstrument`  https://pyinstrument.readthedocs.io/en/latest/home.html
```bash
$ uv add pyinstrument
```

Можно, например, обернуть точку входа с помощью менеджера контекста
```python
from pyinstrument import Profiler

...
if __name__ == "__main__":
   profier = Profiler()
   with profiler:
       main()
	profiler.write_html("./output.html")
```
Или так еще
```python
from pyinstrument import Profiler

...
if __name__ == "__main__":
    profiler = Profiler()
	profiler.start()
	try:
	    main()
	finally:
	    profiler.stop()
		profiler.write_html("./auto_tune_profile.html")
```

Через командную строку можно запустить так
```bash
$ uv run pyinstrument \
    -o auto_tune_profile.html \
	--color \
	cli.py \
	    --path-to-pool-cache-train ./data/pool_cache_...jsonl \
		--path-to-pool-cache-val ./data/pool_cache_....jsonl \
		...
```

Еще можно попробовать `py-spy` https://github.com/benfred/py-spy?tab=readme-ov-file
```bash
$ uv add py-spy
```
Запускаем программу, получаем ее PID и подключаемся py-spy
```bash
$ uv run py-spy record -o profile.svg --pid <PID>
```
